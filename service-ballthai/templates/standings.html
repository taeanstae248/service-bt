<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô | BallThai</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/matches.css">
    <link rel="stylesheet" href="/static/css/standing.css">
</head>
<body>
    {{ template "_nav.html" . }}
    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏Ç‡∏≠‡∏á body ‡πÄ‡∏ä‡πà‡∏ô container standings, league_select, stageZoneContainer, standingsContainer -->
    <div id="mainContainer" class="container">
        <div style="margin-bottom:1rem; display: flex; align-items: center; gap: 10px;">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏µ‡∏Å:</label>
            <select id="league_select" class="search-input"></select>
            <button id="refreshStandingsBtn" type="button" class="btn-secondary" style="margin-left:8px;padding:0.4rem 0.8rem;" onclick="(window.refreshStandings && refreshStandings())">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ï‡∏≤‡∏£‡∏≤‡∏á</button>
            <button id="scrapeStandingBtn" class="btn-primary" onclick="scrapeStanding()">üîÑ ‡∏î‡∏∂‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</button>
            <button id="scrapeJLeagueBtn" class="btn-primary" style="margin-left:8px;padding:0.4rem 0.8rem;">üèüÔ∏è ‡∏î‡∏∂‡∏á J-League</button>
        </div>
        <div id="stageZoneContainer"></div>
        <div id="standingsContainer"></div>
    </div>
    <script src="/static/js/standing.js"></script>
</body>

<script>
function scrapeStanding() {
    if (!confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
    const btn = document.getElementById('scrapeStandingBtn');
    btn.disabled = true;
    btn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á...';
    const baseUrl = window.location.origin;
    fetch(baseUrl + '/scraper/standing')
        .then(res => res.text())
        .then(text => {
            alert('‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ' + text);
            if (typeof fetchStandings === 'function') fetchStandings();
        })
        .catch(err => {
            alert('‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + err.message);
        })
        .finally(() => {
            btn.disabled = false;
            btn.textContent = 'üîÑ ‡∏î‡∏∂‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô';
        });
}
</script>
</body>
</body>
</html>
